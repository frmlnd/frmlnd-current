/**
  * frmlnd-current
  * A super lightweight currency conversion tool.
  * @version 0.1.0
  * @author Adam Penly <apenly@gmail.com>
  * @link https://github.com/frmlnd/frmlnd-current
  * @license MIT License, http://www.opensource.org/licenses/MIT
  */

!function(r){function e(e){var t,n=new r.Deferred,a=null,i="",l="",u="",D=0,R=0,S=0,d=null,f="";if(r(e).css("position","relative"),i=r("<span />",{"class":"crrnt-tooltip"}).insertAfter(r(e)),a=Number(r(e).text().replace(/[^0-9\.]+/g,"")),"NaN"!=a&&"undefined"!=a){t=void 0!==r(e).data("crrnt-currencies")?r(e).data("crrnt-currencies").split(","):o.currencies;for(var p=0;p<t.length;p++)l=void 0!==r(e).data("crrnt-base")?r(e).data("crrnt-base"):o.base,u=t[p],D=c(l,u),R=a*D*10/10,S=parseFloat(R).toFixed(o.accuracy),d=S.toString().split("."),d[0]=d[0].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),f=r("<span />",{"class":"crrnt-line"}).html(s(u)+d.join(".")+" "+u+"<br>").appendTo(i);r(e).append(i),r(".crrnt-tooltip").css("top",-(parseInt(r(".crrnt-tooltip").css("top"))+r(".crrnt-tooltip").height()))}else r(".crrnt-tooltip").hide();return n.resolve(),n.promise()}function t(){r(".crrnt-tooltip").remove()}function n(e){var t,n=new r.Deferred,a=null,i="",l="",u=0,D=0,R=0,S=null,d=[];if(a=Number(r(e).text().replace(/[^0-9\.]+/g,"")),"NaN"!=a&&"undefined"!=a){t=void 0!==r(e).data("crrnt-currencies")?r(e).data("crrnt-currencies").split(","):o.currencies;for(var f=0;f<t.length;f++)i=void 0!==r(e).data("crrnt-base")?r(e).data("crrnt-base"):o.base,l=t[f],u=c(i,l),D=a*u*10/10,R=parseFloat(D).toFixed(o.accuracy),S=R.toString().split("."),S[0]=S[0].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),d.push(s(l)+S.join(".")+" "+l);n.resolve(d)}else n.reject("Could not parse base amount.");return n.promise()}function c(r,e){if(1==a.rates[r])return a.rates[e];var t=1/a.rates[r];return a.rates[e]*t}function s(r){var e={AED:"&#1601;&#1604;&#1587;",AFN:"Af",ALL:"Lek",AMD:"dram",ANG:"NA&#402;",AOA:"Kz",ARS:"&#36;",AUD:"&#36;",AWG:"Afl.",AZN:"m",BAM:"KM",BBD:"&#36;",BDT:"&#2547;",BGN:"&#1083;&#1074;",BHD:".&#1583;.&#1576;",BIF:"FBu",BMD:"&#36;",BND:"&#36;",BOB:"Bs",BRL:"R&#36;",BSD:"&#36;",BTC:"BTC",BTN:"Nu",BWP:"P",BYR:"Br",BZD:"&#36;",CAD:"&#36;",CDF:"FC",CHF:"CHF",CLF:"UF",CLP:"&#36;",CNY:"&#165;",COP:"&#36;",CRC:"&#8353;",CUP:"&#36;",CVE:"&#36;",CZK:"K&#269;",DJF:"Fdj",DKK:"kr",DOP:"&#36;",DZD:"&#1583;&#1580;",EEK:"kr",EGP:"&#1580;.&#1605;",ERN:"Nfk",ETB:"Br",EUR:"&#8364;",FJD:"&#36;",FKP:"&#163;",GBP:"&#163;",GEL:"&#160;&#4314;&#4304;&#4320;&#4312;",GHS:"GH&#8373;",GIP:"&#163;",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"&#36;",HKD:"&#36;",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"&#8362;",INR:"&#8377;",IQD:"&#1593;.&#1583;",IRR:"&#65020;",ISK:"kr",JEP:"&#163;",JMD:"&#36;",JOD:"&#1610;&#1606;&#1575;&#1585;",JPY:"&#160;&#165;",KES:"KSh",KGS:"som",KHR:"CR",KMF:"CF",KPW:"&#8361;",KRW:"&#8361;",KWD:"K.D.",KYD:"&#36;",KZT:"&#8376;",LAK:"&#8365;",LBP:"&#1604;.&#1604;",LKR:"&#8360;",LRD:"&#36;",LSL:"L",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"&#1583;.&#1605;.",MDL:"MDL",MGA:"Ar",MKD:"&#1076;&#1077;&#1085;",MMK:"K",MNT:"&#8366;",MOP:"MOP&#36;",MRO:"UM",MTL:"&#8356;",MUR:"&#8360;",MVR:"Rf",MWK:"MK",MXN:"&#36;",MYR:"RM",MZN:"MT",NAD:"&#36;",NGN:"&#8358;",NIO:"C&#36;",NOK:"kr",NPR:"&#160;&#8360;&#160;",NZD:"&#36;",OMR:"&#1585;.&#1593;.",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"&#160;&#8369;",PKR:"Rs",PLN:"z&#322;",PYG:"&#8370;",QAR:"&#1585;.&#1602;",RON:"leu",RSD:"&#1056;&#1057;&#1044;",RUB:"&#1088;&#1091;&#1073;.",RWF:"FRw",SAR:"&#1585;.&#1587;",SBD:"&#36;",SCR:"SR",SDG:"&#163;",SEK:"kr",SGD:"&#36;",SHP:"&#163;",SLL:"Le",SOS:"Sh.So.",SRD:"&#36;",STD:"Db",SVC:"&#8353;",SYP:"&#160;&#163;S",SZL:"L",THB:"&#3647;",TJS:"TJS",TMT:"m",TND:"DT",TOP:"T&#36;",TRY:"TL",TTD:"&#36;",TWD:"&#36;",TZS:"TSh",UAH:"&#8372;",UGX:"USh",USD:"&#36;",UYU:"UYU",UZS:"som",VEF:"Bs.F",VND:"&#8363;",VUV:"VT",WST:"&#36;",XAF:"FCFA",XAG:"ozt",XAU:"ozt",XCD:"&#36;",XDR:"SDRs",XOF:"&#36;",XPF:"F",YER:"&#65020;",ZAR:"R",ZMK:"ZK",ZMW:"ZMK",ZWL:"&#36;"};return e[r]}var a,o;r.fn.current=function(c){return o=r.extend({api:null,base:"USD",currencies:["EUR","JPY","CNY"],accuracy:2},c),a||r.getJSON(o.api).done(function(r){a=r,a.rates[a.base]=1,console.log(a)}).fail(function(r,e,t){console.log("ERROR: "+t)}),r(this).each(function(){var c=this;if(r(c).addClass("crrnt-base"),r(c).hasClass("click"))r(c).css("cursor","pointer"),r(c).click(function(){e(c).then(function(){setTimeout(function(){r("body").click(function(){t(),r(this).unbind("click")})},500)})});else if(r(c).hasClass("inline")){var s=(document.createElement("span"),"");setTimeout(function(){n(c).then(function(e){for(var t=0;t<e.length;t++)s=r("<span></span>").html(e[t]),s.addClass("crrnt-currency"),r(c).after(s)})},500)}else r(c).hover(function(){t(),r(c).css("cursor","help"),e(c)},function(){t()})})}}(jQuery);