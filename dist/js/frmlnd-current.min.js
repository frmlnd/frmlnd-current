/**
  * frmlnd-current
  * A super lightweight currency conversion tool.
  * @version 0.1.0
  * @author Adam Penly <apenly@gmail.com>
  * @link https://github.com/frmlnd/frmlnd-current
  * @license MIT License, http://www.opensource.org/licenses/MIT
  */

!function(r){function t(t){var e=new r.Deferred,s="",c=n(t),o=0,i="";return c.then(function(n){if(r(t).css("position","relative"),s=r("<span />",{"class":"crrnt-tooltip"}).insertAfter(r(t)),o=n.length,n&&o>0){for(var c=0;c<o;c++)i=r("<span />",{"class":"crrnt-line"}).html(n[c]+"<br>").appendTo(s);r(t).append(s),r(".crrnt-tooltip").css("top",-(parseInt(r(".crrnt-tooltip").css("top"))+r(".crrnt-tooltip").height())),e.resolve()}else r(".crrnt-tooltip").hide()}),e.promise()}function e(){r(".crrnt-tooltip").remove()}function n(t){var e,n=new r.Deferred,o=null,a="",D="",u=0,l=0,R=0,S=null,f=[];if(o=Number(r(t).text().replace(/[^0-9\.]+/g,"")),"NaN"!=o&&"undefined"!=o){e=void 0!==r(t).data("crrnt-currencies")?r(t).data("crrnt-currencies").split(","):i.currencies;for(var K=0;K<e.length;K++)a=void 0!==r(t).data("crrnt-base")?r(t).data("crrnt-base"):i.base,D=e[K],u=s(a,D),l=o*u*10/10,R=parseFloat(l).toFixed(i.accuracy),S=R.toString().split("."),S[0]=S[0].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),f.push(c(D)+S.join(".")+" "+D);n.resolve(f)}else n.reject("Could not parse base amount.");return n.promise()}function s(r,t){if(1==o.rates[r])return o.rates[t];var e=1/o.rates[r];return o.rates[t]*e}function c(r){var t={AED:"&#1601;&#1604;&#1587;",AFN:"Af",ALL:"Lek",AMD:"dram",ANG:"NA&#402;",AOA:"Kz",ARS:"&#36;",AUD:"&#36;",AWG:"Afl.",AZN:"m",BAM:"KM",BBD:"&#36;",BDT:"&#2547;",BGN:"&#1083;&#1074;",BHD:".&#1583;.&#1576;",BIF:"FBu",BMD:"&#36;",BND:"&#36;",BOB:"Bs",BRL:"R&#36;",BSD:"&#36;",BTC:"BTC",BTN:"Nu",BWP:"P",BYR:"Br",BZD:"&#36;",CAD:"&#36;",CDF:"FC",CHF:"CHF",CLF:"UF",CLP:"&#36;",CNY:"&#165;",COP:"&#36;",CRC:"&#8353;",CUP:"&#36;",CVE:"&#36;",CZK:"K&#269;",DJF:"Fdj",DKK:"kr",DOP:"&#36;",DZD:"&#1583;&#1580;",EEK:"kr",EGP:"&#1580;.&#1605;",ERN:"Nfk",ETB:"Br",EUR:"&#8364;",FJD:"&#36;",FKP:"&#163;",GBP:"&#163;",GEL:"&#160;&#4314;&#4304;&#4320;&#4312;",GHS:"GH&#8373;",GIP:"&#163;",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"&#36;",HKD:"&#36;",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"&#8362;",INR:"&#8377;",IQD:"&#1593;.&#1583;",IRR:"&#65020;",ISK:"kr",JEP:"&#163;",JMD:"&#36;",JOD:"&#1610;&#1606;&#1575;&#1585;",JPY:"&#160;&#165;",KES:"KSh",KGS:"som",KHR:"CR",KMF:"CF",KPW:"&#8361;",KRW:"&#8361;",KWD:"K.D.",KYD:"&#36;",KZT:"&#8376;",LAK:"&#8365;",LBP:"&#1604;.&#1604;",LKR:"&#8360;",LRD:"&#36;",LSL:"L",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"&#1583;.&#1605;.",MDL:"MDL",MGA:"Ar",MKD:"&#1076;&#1077;&#1085;",MMK:"K",MNT:"&#8366;",MOP:"MOP&#36;",MRO:"UM",MTL:"&#8356;",MUR:"&#8360;",MVR:"Rf",MWK:"MK",MXN:"&#36;",MYR:"RM",MZN:"MT",NAD:"&#36;",NGN:"&#8358;",NIO:"C&#36;",NOK:"kr",NPR:"&#160;&#8360;&#160;",NZD:"&#36;",OMR:"&#1585;.&#1593;.",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"&#160;&#8369;",PKR:"Rs",PLN:"z&#322;",PYG:"&#8370;",QAR:"&#1585;.&#1602;",RON:"leu",RSD:"&#1056;&#1057;&#1044;",RUB:"&#1088;&#1091;&#1073;.",RWF:"FRw",SAR:"&#1585;.&#1587;",SBD:"&#36;",SCR:"SR",SDG:"&#163;",SEK:"kr",SGD:"&#36;",SHP:"&#163;",SLL:"Le",SOS:"Sh.So.",SRD:"&#36;",STD:"Db",SVC:"&#8353;",SYP:"&#160;&#163;S",SZL:"L",THB:"&#3647;",TJS:"TJS",TMT:"m",TND:"DT",TOP:"T&#36;",TRY:"TL",TTD:"&#36;",TWD:"&#36;",TZS:"TSh",UAH:"&#8372;",UGX:"USh",USD:"&#36;",UYU:"UYU",UZS:"som",VEF:"Bs.F",VND:"&#8363;",VUV:"VT",WST:"&#36;",XAF:"FCFA",XAG:"ozt",XAU:"ozt",XCD:"&#36;",XDR:"SDRs",XOF:"&#36;",XPF:"F",YER:"&#65020;",ZAR:"R",ZMK:"ZK",ZMW:"ZMK",ZWL:"&#36;"};return t[r]}var o,i;r.fn.current=function(s){return i=r.extend({api:null,base:"USD",currencies:["EUR","JPY","CNY"],accuracy:2},s),o||r.getJSON(i.api).done(function(r){o=r,o.rates[o.base]=1}).fail(function(r,t,e){console.log("ERROR: "+e)}),r(this).each(function(){var s=this;if(r(s).addClass("crrnt-base"),r(s).hasClass("click"))r(s).css("cursor","pointer"),r(s).click(function(){t(s).then(function(){setTimeout(function(){r("body").click(function(){e(),r(this).unbind("click")})},500)})});else if(r(s).hasClass("inline")){var c=(document.createElement("span"),"");setTimeout(function(){n(s).then(function(t){for(var e=0;e<t.length;e++)c=r("<span></span>").html(t[e]),c.addClass("crrnt-currency"),r(s).after(c)})},500)}else r(s).hover(function(){e(),r(s).css("cursor","help"),t(s)},function(){e()})})}}(jQuery);